<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíú</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=3.0">
    <title>Kimberly's Productivity Tracker</title>
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDTd41vsTlzjKeGu7Eq91IM3Q-8v88h-ng",
            authDomain: "productivity-tracker-knf13.firebaseapp.com",
            projectId: "productivity-tracker-knf13",
            storageBucket: "productivity-tracker-knf13.firebasestorage.app",
            messagingSenderId: "76203539357",
            appId: "1:76203539357:web:7d474a6a57c631b80d96"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
    
    <style>
        /* CSS Variables for easy theming */
        :root {
            --primary-gradient: linear-gradient(135deg, #6B2C91 0%, #9A4AC0 50%, #C084E8 100%);
            --text-primary: #2d3748;
            --text-secondary: #718096;
            --bg-primary: #f0f2f5;
            --white: #ffffff;
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --shadow-sm: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-md: 0 10px 30px rgba(0,0,0,0.1);
            --shadow-lg: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            padding: 20px;
            max-width: 100%;
            margin: 0;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
            color: var(--text-primary);
            animation: fadeIn 0.8s ease;
        }
        
        .header h1 {
            font-size: clamp(2em, 5vw, 2.5em);
            margin-bottom: 10px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            color: var(--text-secondary);
            font-size: 1.1em;
        }
        
        .date {
            font-size: 1.1em;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* Header Buttons */
        .header-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .header-btn {
            padding: 10px 20px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }
        
        .header-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Container */
        .container {
            max-width: 1300px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 25px;
        }
        
        /* Section Styles */
        .section {
            border-radius: 20px;
            padding: 30px;
            min-height: 260px;
            position: relative;
            overflow: hidden;
            color: white;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: none;
            margin-bottom: 20px;
            scroll-margin-top: 80px;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        /* Category-specific gradients */
        .section.work { background: linear-gradient(135deg, #FF1493 0%, #FF69B4 50%, #FFB6C1 100%); }
        .section.education { background: linear-gradient(135deg, #FF6347 0%, #FF7F50 50%, #FFA07A 100%); }
        .section.relationships { background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FFE4B5 100%); }
        .section.money { background: linear-gradient(135deg, #00FF7F 0%, #32CD32 50%, #90EE90 100%); }
        .section.business { background: linear-gradient(135deg, #00CED1 0%, #00BFFF 50%, #87CEEB 100%); }
        .section.leisure { background: linear-gradient(135deg, #4169E1 0%, #1E90FF 50%, #87CEFA 100%); }
        .section.vanity { background: linear-gradient(135deg, #8A2BE2 0%, #9370DB 50%, #DDA0DD 100%); }
        .section.health { background: linear-gradient(135deg, #FF69B4 0%, #FFB6C1 50%, #FFC0CB 100%); }
        .section.home { background: linear-gradient(135deg, #9932CC 0%, #BA55D3 50%, #DA70D6 100%); }
        
        /* Special sections */
        .section.special {
            background: var(--primary-gradient) !important;
            color: white !important;
            box-shadow: 0 4px 20px rgba(107, 44, 145, 0.4) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
        }
        
        .section.empire-integration {
            background: linear-gradient(135deg, #B8860B 0%, #DAA520 50%, #FFD700 100%) !important;
        }
        
        .section.creative-workflow {
            background: linear-gradient(135deg, #E6E6FA 0%, #DDA0DD 50%, #9370DB 100%);
        }
        
        /* Section Icons */
        .section::before {
            position: absolute;
            font-size: 8em;
            opacity: 0.15;
            top: 20px;
            right: 20px;
            transition: var(--transition);
            text-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .section:hover::before {
            opacity: 0.25;
            transform: scale(1.1) rotate(5deg);
        }
        
        .work::before { content: "üíº"; }
        .education::before { content: "üìö"; }
        .relationships::before { content: "üíù"; }
        .money::before { content: "üí∞"; }
        .business::before { content: "üöÄ"; }
        .leisure::before { content: "üé®"; }
        .vanity::before { content: "üíÖ"; }
        .health::before { content: "üåø"; }
        .home::before { content: "üè°"; }
        
        /* Floating animation */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .section::after {
            position: absolute;
            font-size: 3em;
            opacity: 0.2;
            bottom: 20px;
            left: 20px;
            animation: float 3s ease-in-out infinite;
        }
        
        .work::after { content: "üíª"; }
        .education::after { content: "‚úèÔ∏è"; }
        .relationships::after { content: "ü§ù"; }
        .money::after { content: "üíµ"; }
        .business::after { content: "üìà"; }
        .leisure::after { content: "üé≠"; }
        .vanity::after { content: "‚ú®"; }
        .health::after { content: "üí™"; }
        .home::after { content: "üõãÔ∏è"; }
        
        /* Section headers */
        .section h2 {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }
        
        .section-description {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9em;
            margin-bottom: 20px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }
        
        /* Task inputs */
        .task-input {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
        }
        
        .task-input:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateX(5px);
        }
        
        .task-input.completed {
            opacity: 0.7;
        }
        
        .task-input.completed input[type="text"] {
            text-decoration: line-through;
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* Checkbox styling */
        .task-checkbox {
            appearance: none;
            width: 22px;
            height: 22px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
            flex-shrink: 0;
        }
        
        .task-checkbox:hover {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.7);
        }
        
        .task-checkbox:checked {
            background: rgba(255, 255, 255, 0.9);
            border-color: white;
        }
        
        .task-checkbox:checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-weight: bold;
            font-size: 14px;
        }
        
        /* Priority buttons */
        .priority-buttons {
            display: flex;
            gap: 5px;
            margin-right: 10px;
        }
        
        .priority-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: var(--transition);
            color: white;
        }
        
        .priority-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .priority-btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* Task text input */
        .task-text {
            flex: 1;
            padding: 0;
            background: transparent;
            border: none;
            font-size: 0.95em;
            color: white;
            font-weight: 500;
        }
        
        .task-text:focus {
            outline: none;
        }
        
        .task-text::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* Time tracking */
        .time-tracking {
            display: flex;
            gap: 5px;
            align-items: center;
            margin-left: 10px;
        }
        
        .time-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            transition: var(--transition);
            color: white;
        }
        
        .time-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .time-display {
            font-weight: bold;
            color: white;
            margin-left: 8px;
            min-width: 60px;
        }
        
        /* Delete button */
        .delete-task-btn {
            background: rgba(255, 0, 0, 0.6);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 1.2em;
            min-width: 30px;
            height: 30px;
        }
        
        .task-input:hover .delete-task-btn,
        .empire-task-input:hover .delete-task-btn {
            opacity: 1;
        }
        
        /* Add button */
        .add-task-btn {
            margin-top: 20px;
            padding: 14px 24px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: var(--border-radius);
            color: white;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            font-size: 0.95em;
            text-shadow: 0 1px 5px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }
        
        .add-task-btn:hover {
            background: rgba(255, 255, 255, 0.35);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        /* Stats widget */
        .stats {
            position: sticky;
            top: 10px;
            right: 10px;
            background: var(--primary-gradient);
            color: white;
            padding: 12px 16px;
            border-radius: var(--border-radius);
            font-size: 0.9em;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(107, 44, 145, 0.4);
            margin-bottom: 15px;
            text-align: center;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .completed-count {
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .sync-status {
            font-size: 0.8em;
            opacity: 0.95;
            margin-top: 5px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        /* Sticky Navigation */
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #e8e8e8;
            padding: 10px 0;
            margin: -20px -20px 20px -20px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }
        
        .nav-container {
            display: flex;
            gap: 8px;
            padding: 0 20px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            align-items: center;
        }
        
        .nav-container::-webkit-scrollbar {
            display: none;
        }
        
        .nav-pill {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%);
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-size: 0.8em;
            min-width: 60px;
            position: relative;
        }
        
        .nav-pill:hover {
            background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .nav-pill.active {
            background: var(--primary-gradient);
            color: white;
            border-color: #6B2C91;
            box-shadow: 0 4px 12px rgba(107, 44, 145, 0.3);
        }
        
        .nav-pill.active .nav-icon,
        .nav-pill.active .nav-label {
            color: white;
        }
        
        .nav-icon {
            font-size: 1.2em;
        }
        
        .nav-label {
            font-size: 0.75em;
            font-weight: 600;
            color: #666;
        }
        
        .nav-divider {
            width: 1px;
            height: 30px;
            background: #ddd;
            margin: 0 4px;
        }
        
        /* History controls */
        .history-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            padding: 20px;
            background: var(--primary-gradient);
            border-radius: var(--border-radius);
            color: white;
            flex-wrap: wrap;
        }
        
        .date-picker {
            padding: 10px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        
        .date-picker::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }
        
        .history-btn {
            background: rgba(255, 255, 255, 0.95);
            color: #6B2C91;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .history-btn:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        .viewing-history {
            background: #f0e6ff;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            color: #6B2C91;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        /* Yesterday Review */
        .yesterday-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            min-width: 120px;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
            color: white;
        }
        
        .yesterday-tasks {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .yesterday-task-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid rgba(255, 255, 255, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }
        
        .task-category-badge {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Buttons */
        .btn {
            padding: 12px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            min-height: 44px;
            touch-action: manipulation;
        }
        
        .btn-primary {
            background: rgba(255, 255, 255, 0.95);
            color: #6B2C91;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        
        .btn-primary:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        /* Weekly Review */
        .weekly-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .weekly-breakdown {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .category-bar {
            margin: 15px 0;
        }
        
        .category-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .category-bar-fill {
            height: 25px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        
        .category-bar-progress {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-size: 0.8em;
            font-weight: bold;
            transition: width 0.5s ease;
        }
        
        /* Empire Integration */
        .empire-subsection {
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        
        .empire-subsection h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .empire-task-input {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .empire-task-input:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateX(5px);
        }
        
        /* Creative Streaks */
        .streak-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .streak-box {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
        }
        
        .streak-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .streak-number {
            font-size: 2.5em;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .streak-label {
            font-size: 0.9em;
            margin-top: 5px;
            color: white;
            opacity: 0.9;
        }
        
        .streak-emoji {
            font-size: 1.5em;
            margin-top: 10px;
        }
        
        /* Suggestions */
        .suggestion-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .suggestion-select {
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1em;
            backdrop-filter: blur(10px);
            width: 100%;
            min-height: 44px;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml;charset=US-ASCII,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'><path fill='white' d='M2 0L0 2h4zm0 5L0 3h4z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 12px;
        }
        
        .suggestion-select option {
            background: #6B2C91;
            color: white;
        }
        
        .current-suggestion {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .suggestion-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 10px;
            color: white;
        }
        
        .suggestion-category {
            font-size: 0.9em;
            opacity: 0.8;
            font-style: italic;
            color: white;
        }
        
        .suggestion-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* Goal Milestones */
        .goal-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .goal-title {
            font-size: 1.3em;
            font-weight: bold;
            color: white;
        }
        
        .goal-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-text {
            font-size: 0.9em;
            color: white;
            opacity: 0.9;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            transition: width 0.3s ease;
        }
        
        .milestone-list {
            list-style: none;
        }
        
        .milestone-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            color: white;
        }
        
        .milestone-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .milestone-text {
            flex: 1;
            font-size: 0.95em;
        }
        
        .milestone-item.completed .milestone-text {
            text-decoration: line-through;
            opacity: 0.7;
        }
        
        /* Brain Dump */
        .brain-dump-textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            box-sizing: border-box;
        }
        
        .brain-dump-textarea:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
            background: white;
        }
        
        /* Daily Summary */
        .summary-content {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            line-height: 1.6;
        }
        
        .summary-placeholder {
            text-align: center;
            opacity: 0.8;
            font-style: italic;
        }
        
        .summary-section {
            margin-bottom: 25px;
        }
        
        .summary-section h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.2em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 8px;
        }
        
        .summary-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .summary-stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 80px;
        }
        
        .summary-stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: white;
        }
        
        .summary-stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .summary-task-list {
            list-style: none;
            padding: 0;
        }
        
        .summary-task-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 6px;
            border-left: 3px solid rgba(255, 255, 255, 0.4);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }
        
        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Toasts */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            animation: slideUp 0.3s ease, fadeOut 0.3s ease 2.7s;
        }
        
        @keyframes slideUp {
            from {
                transform: translate(-50%, 100%);
            }
            to {
                transform: translate(-50%, 0);
            }
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .section::before {
                font-size: 6em;
                top: 10px;
                right: 10px;
            }
            
            .section {
                min-height: 220px;
                padding: 25px;
            }
            
            .yesterday-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-box {
                min-width: auto;
                width: 100%;
                max-width: 200px;
                margin: 0 auto;
            }
            
            .streak-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .priority-buttons {
                flex-wrap: wrap;
            }
            
            .sticky-nav {
                padding: 8px 0;
            }
            
            .nav-pill {
                padding: 6px 10px;
                min-width: 50px;
            }
            
            .nav-label {
                font-size: 0.7em;
            }
            
            .nav-icon {
                font-size: 1.1em;
            }
            
            .history-controls {
                flex-direction: column;
                text-align: center;
            }
            
            .header-buttons {
                flex-direction: column;
                width: 100%;
                max-width: 300px;
                margin: 20px auto 0;
            }
            
            .header-btn {
                width: 100%;
            }
        }
        
        /* Desktop optimizations */
        @media (min-width: 1025px) {
            body {
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
            }
            
            .creative-workflow,
            .brain-dump,
            .daily-summary,
            .goal-milestones,
            .yesterday-review,
            .weekly-review,
            .empire-integration,
            .creative-streaks,
            .unstuck-suggestions {
                grid-column: 1 / -1;
            }
            
            .stats {
                position: fixed;
                top: 20px;
                right: 20px;
                margin: 0;
            }
        }
        
        /* Print styles */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .section {
                page-break-inside: avoid;
                background: white !important;
                color: black !important;
                border: 1px solid #ddd !important;
            }
            
            .sticky-nav,
            .stats,
            .history-controls,
            button {
                display: none !important;
            }
        }
        
        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }
        
        :focus-visible {
            outline: 3px solid #4169E1;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Stats Widget -->
    <div class="stats">
        <div>Tasks Completed</div>
        <div class="completed-count" id="completedCount">0</div>
        <div id="totalTime" style="margin-top: 8px;"></div>
        <div class="sync-status" id="syncStatus">‚òÅ Cloud Loaded</div>
    </div>
    
    <!-- Header -->
    <div class="header">
        <h1>Daily Productivity Tracker</h1>
        <div class="date" id="currentDate"></div>
        <div class="header-buttons">
            <button class="header-btn" onclick="startFreshDay()">üåÖ Start Fresh Day</button>
            <button class="header-btn" onclick="showWeeklyReview()">üìä Weekly Review</button>
        </div>
    </div>
    
    <!-- History Controls -->
    <div class="history-controls">
        <label>View Past Day:</label>
        <input type="date" id="historyDate" class="date-picker">
        <button class="history-btn" onclick="viewHistoryDate()">üìñ View This Date</button>
        <button class="history-btn" onclick="returnToToday()">üìÖ Back to Today</button>
    </div>
    <div id="historyNotice" class="viewing-history" style="display: none;"></div>
    
    <!-- Sticky Navigation -->
    <nav class="sticky-nav" id="stickyNav">
        <div class="nav-container">
            <button class="nav-pill" data-section="yesterdaySection" title="Yesterday's Wins">
                <span class="nav-icon">üåü</span>
                <span class="nav-label">Yesterday</span>
            </button>
            <button class="nav-pill" data-section="weeklySection" title="Weekly Review">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Weekly</span>
            </button>
            <button class="nav-pill" data-section="empireSection" title="Empire Integration">
                <span class="nav-icon">‚ú®</span>
                <span class="nav-label">Empire</span>
            </button>
            <button class="nav-pill" data-section="streaksSection" title="Creative Streaks">
                <span class="nav-icon">üî•</span>
                <span class="nav-label">Streaks</span>
            </button>
            <button class="nav-pill" data-section="stuckSection" title="Feeling Stuck">
                <span class="nav-icon">üí°</span>
                <span class="nav-label">Unstuck</span>
            </button>
            <div class="nav-divider"></div>
            <button class="nav-pill" data-section="workSection" title="Work">
                <span class="nav-icon">üíº</span>
                <span class="nav-label">Work</span>
            </button>
            <button class="nav-pill" data-section="educationSection" title="Education">
                <span class="nav-icon">üìö</span>
                <span class="nav-label">Learn</span>
            </button>
            <button class="nav-pill" data-section="relationshipsSection" title="Relationships">
                <span class="nav-icon">üíù</span>
                <span class="nav-label">Connect</span>
            </button>
            <button class="nav-pill" data-section="moneySection" title="Money">
                <span class="nav-icon">üí∞</span>
                <span class="nav-label">Money</span>
            </button>
            <button class="nav-pill" data-section="businessSection" title="Business">
                <span class="nav-icon">üöÄ</span>
                <span class="nav-label">Business</span>
            </button>
            <button class="nav-pill" data-section="leisureSection" title="Leisure">
                <span class="nav-icon">üé®</span>
                <span class="nav-label">Leisure</span>
            </button>
            <button class="nav-pill" data-section="vanitySection" title="Vanity">
                <span class="nav-icon">üíÖ</span>
                <span class="nav-label">Vanity</span>
            </button>
            <button class="nav-pill" data-section="healthSection" title="Health">
                <span class="nav-icon">üåø</span>
                <span class="nav-label">Health</span>
            </button>
            <button class="nav-pill" data-section="homeSection" title="Home">
                <span class="nav-icon">üè°</span>
                <span class="nav-label">Home</span>
            </button>
            <div class="nav-divider"></div>
            <button class="nav-pill" data-section="workflowSection" title="Creative Flow">
                <span class="nav-icon">‚ú®</span>
                <span class="nav-label">Flow</span>
            </button>
            <button class="nav-pill" data-section="goalsSection" title="Goals">
                <span class="nav-icon">üéØ</span>
                <span class="nav-label">Goals</span>
            </button>
            <button class="nav-pill" data-section="brainSection" title="Brain Dump">
                <span class="nav-icon">üß†</span>
                <span class="nav-label">Brain</span>
            </button>
            <button class="nav-pill" data-section="summarySection" title="Summary">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Summary</span>
            </button>
        </div>
    </nav>
    
    <!-- Yesterday's Review Section -->
    <div class="section special yesterday-review" id="yesterdaySection" style="display: none; margin-bottom: 30px;">
        <h2>üåü Yesterday's Wins</h2>
        <div class="section-description">Look at all the amazing things you accomplished yesterday!</div>
        <div class="yesterday-stats">
            <div class="stat-box">
                <div class="stat-number" id="yesterdayCount">0</div>
                <div class="stat-label">Tasks Completed</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="streakCount">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
        </div>
        <div class="yesterday-tasks" id="yesterdayTasks">
            <!-- Yesterday's completed tasks will appear here -->
        </div>
        <button class="btn btn-primary" style="width: 100%; max-width: 300px; margin: 20px auto; display: block;" onclick="hideYesterdayReview()">Let's Build on This Success! üöÄ</button>
    </div>
    
    <!-- Weekly Review Section -->
    <div class="section special weekly-review" id="weeklySection" style="display: none; margin-bottom: 30px;">
        <h2>üìä Weekly Review</h2>
        <div class="section-description">Your productivity patterns over the past 7 days</div>
        
        <div class="weekly-stats-grid">
            <div class="stat-box">
                <div class="stat-number" id="weeklyTaskCount">0</div>
                <div class="stat-label">Tasks Completed</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="weeklyTimeSpent">0h</div>
                <div class="stat-label">Time Invested</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="mostProductiveDay">-</div>
                <div class="stat-label">Best Day</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="topCategory">-</div>
                <div class="stat-label">Top Focus</div>
            </div>
        </div>
        
        <div class="weekly-breakdown" id="weeklyBreakdown">
            <!-- Category breakdown will go here -->
        </div>
        
        <div class="weekly-insights" id="weeklyInsights">
            <!-- Insights will go here -->
        </div>
        
        <button class="btn btn-primary" style="width: 100%; max-width: 300px; margin: 20px auto; display: block;" onclick="hideWeeklyReview()">Ready for Another Productive Week! üí™</button>
    </div>
    
    <!-- Empire Integration Points Section -->
    <div class="section empire-integration" id="empireSection" style="margin-bottom: 30px;">
        <h2>‚ú® Empire Integration Points</h2>
        <div class="section-description">Strategic overview of your empire-building priorities</div>
        
        <div class="empire-subsection">
            <h3>üéØ Empire Priorities This Week</h3>
            <div id="empire-priorities"></div>
            <button class="add-task-btn" onclick="addEmpireTask('empire-priorities')">+ Add Priority</button>
        </div>
        
        <div class="empire-subsection">
            <h3>üìÖ Major Business Deadlines</h3>
            <div id="empire-deadlines"></div>
            <button class="add-task-btn" onclick="addEmpireTask('empire-deadlines')">+ Add Deadline</button>
        </div>
        
        <div class="empire-subsection">
            <h3>üí∞ Revenue-Critical Tasks</h3>
            <div id="empire-revenue"></div>
            <button class="add-task-btn" onclick="addEmpireTask('empire-revenue')">+ Add Revenue Task</button>
        </div>
        
        <div class="empire-subsection">
            <h3>üîÑ Cross-Brand Opportunities</h3>
            <div id="empire-opportunities"></div>
            <button class="add-task-btn" onclick="addEmpireTask('empire-opportunities')">+ Add Opportunity</button>
        </div>
    </div>
    
    <!-- Creative Streaks Section -->
    <div class="section special creative-streaks" id="streaksSection" style="margin-bottom: 30px;">
        <h2>üî• Creative Streaks</h2>
        <div class="section-description">Build momentum with consistent creative habits</div>
        <div class="streak-grid">
            <div class="streak-box">
                <div class="streak-number" id="writingStreak">0</div>
                <div class="streak-label">Writing Streak</div>
                <div class="streak-emoji">‚úçÔ∏è</div>
            </div>
            <div class="streak-box">
                <div class="streak-number" id="submissionStreak">0</div>
                <div class="streak-label">Submission Streak</div>
                <div class="streak-emoji">üìÆ</div>
            </div>
            <div class="streak-box">
                <div class="streak-number" id="authorityStreak">0</div>
                <div class="streak-label">Authority Building</div>
                <div class="streak-emoji">üëë</div>
            </div>
            <div class="streak-box">
                <div class="streak-number" id="newsletterStreak">0</div>
                <div class="streak-label">Newsletter Consistency</div>
                <div class="streak-emoji">üì¨</div>
            </div>
        </div>
    </div>
    
    <!-- Unstuck Suggestions Section -->
    <div class="section special unstuck-suggestions" id="stuckSection" style="margin-bottom: 30px;">
        <h2>‚ú® Feeling Stuck? Try This</h2>
        <div class="section-description">Goal-aligned suggestions to get you moving when motivation is low</div>
        
        <div class="suggestion-controls">
            <button class="btn btn-primary" style="width: 100%;" onclick="getRandomSuggestion()">üé≤ Get Random Suggestion</button>
            <select class="suggestion-select" id="categoryFilter" onchange="getSuggestionByCategory()">
                <option value="">Choose a focus area...</option>
                <option value="career">üìù Career & Creativity</option>
                <option value="wealth">üíº Wealth & Business</option>
                <option value="growth">üìö Growth & Learning</option>
                <option value="home">üè° Home & Environment</option>
                <option value="wellness">üå± Wellness & Health</option>
                <option value="vanity">‚ú® Vanity & Visibility</option>
                <option value="relationships">üíï Relationships & Community</option>
            </select>
        </div>
        
        <div class="current-suggestion" id="currentSuggestion">
            <div class="suggestion-text">Click "Get Random Suggestion" to start!</div>
        </div>
        
        <div class="suggestion-actions">
            <button class="btn btn-primary" style="width: 100%;" onclick="addSuggestionAsTask()">+ Add as Task</button>
            <button class="btn btn-secondary" style="width: 100%;" onclick="getAnotherSuggestion()">‚Üª Another Suggestion</button>
        </div>
    </div>
    
    <div class="container">
        <!-- Life Areas Grid -->
        <div class="section work" id="workSection">
            <h2>üíº Work</h2>
            <div class="section-description">Creative production, admin, and digital content</div>
            <div id="work-tasks"></div>
            <button class="add-task-btn" onclick="addTask('work')">+ Add Task</button>
        </div>
        
        <div class="section education" id="educationSection">
            <h2>üìö Education</h2>
            <div class="section-description">Reading, researching, or watching intellectually nourishing media</div>
            <div id="education-tasks"></div>
            <button class="add-task-btn" onclick="addTask('education')">+ Add Task</button>
        </div>
        
        <div class="section relationships" id="relationshipsSection">
            <h2>üíù Relationships</h2>
            <div class="section-description">Connection, communication, and check-ins with your circle</div>
            <div id="relationships-tasks"></div>
            <button class="add-task-btn" onclick="addTask('relationships')">+ Add Task</button>
        </div>
        
        <div class="section money" id="moneySection">
            <h2>üí∞ Money</h2>
            <div class="section-description">Tracking finances, pitching, promoting, or strategizing</div>
            <div id="money-tasks"></div>
            <button class="add-task-btn" onclick="addTask('money')">+ Add Task</button>
        </div>
        
        <div class="section business" id="businessSection">
            <h2>üöÄ Business</h2>
            <div class="section-description">Growth, audience engagement, product building</div>
            <div id="business-tasks"></div>
            <button class="add-task-btn" onclick="addTask('business')">+ Add Task</button>
        </div>
        
        <div class="section leisure" id="leisureSection">
            <h2>üé® Leisure</h2>
            <div class="section-description">Intentional play, consuming media, and exploring joy</div>
            <div id="leisure-tasks"></div>
            <button class="add-task-btn" onclick="addTask('leisure')">+ Add Task</button>
        </div>
        
        <div class="section vanity" id="vanitySection">
            <h2>üíÖ Vanity</h2>
            <div class="section-description">Skincare, fashion, and beauty rituals that fuel confidence</div>
            <div id="vanity-tasks"></div>
            <button class="add-task-btn" onclick="addTask('vanity')">+ Add Task</button>
        </div>
        
        <div class="section health" id="healthSection">
            <h2>üåø Health</h2>
            <div class="section-description">Movement, mindfulness, meals, or rest</div>
            <div id="health-tasks"></div>
            <button class="add-task-btn" onclick="addTask('health')">+ Add Task</button>
        </div>
        
        <div class="section home" id="homeSection">
            <h2>üè° Home</h2>
            <div class="section-description">Tidying, organizing, decorating, or improving your space</div>
            <div id="home-tasks"></div>
            <button class="add-task-btn" onclick="addTask('home')">+ Add Task</button>
        </div>
        
        <!-- Creative Workflow Section -->
        <div class="section creative-workflow" id="workflowSection">
            <h2>‚ú® Creative Flow: PRODUCE ‚Ä¢ RECOVER ‚Ä¢ DISCOVER</h2>
            <div class="workflow-grid">
                <div class="empire-subsection">
                    <h3>üé¨ PRODUCE</h3>
                    <div class="section-description">Create something new: Record a video, draft a post, write a script, build a graphic</div>
                    <div id="produce-tasks"></div>
                    <button class="add-task-btn" onclick="addTask('produce')">+ Add Task</button>
                </div>
                
                <div class="empire-subsection">
                    <h3>‚ôªÔ∏è RECOVER</h3>
                    <div class="section-description">Revisit unfinished ideas: Finish an outline, revise a blog post, turn notes into content</div>
                    <div id="recover-tasks"></div>
                    <button class="add-task-btn" onclick="addTask('recover')">+ Add Task</button>
                </div>
                
                <div class="empire-subsection">
                    <h3>üîç DISCOVER</h3>
                    <div class="section-description">Feed the pipeline: Read articles, watch videos for inspiration, research trends</div>
                    <div id="discover-tasks"></div>
                    <button class="add-task-btn" onclick="addTask('discover')">+ Add Task</button>
                </div>
            </div>
        </div>
        
        <!-- Goal Milestones Section -->
        <div class="section special goal-milestones" id="goalsSection">
            <h2>üéØ Goal Milestones</h2>
            <div class="section-description">Track progress toward your major creative objectives</div>
            <div id="goals-container"></div>
        </div>
        
        <!-- Brain Dump Section -->
        <div class="section special brain-dump" id="brainSection">
            <h2>üß† Brain Dump</h2>
            <div class="section-description">Capture any thoughts, ideas, or random notes here</div>
            <textarea class="brain-dump-textarea" placeholder="Let your thoughts flow here..." id="brainDumpTextarea"></textarea>
        </div>
        
        <!-- Daily Summary Section -->
        <div class="section special daily-summary" id="summarySection">
            <h2>üìä Daily Summary</h2>
            <div class="section-description">Review your accomplishments and generate a summary</div>
            <button class="btn btn-primary" style="width: 100%; margin-bottom: 20px;" onclick="generateDailySummary()">Generate Today's Summary</button>
            <div class="summary-content" id="summaryContent">
                <div class="summary-placeholder">Click "Generate Today's Summary" to see your daily accomplishments!</div>
            </div>
            <button class="btn btn-secondary" style="width: 100%; margin-top: 20px;" onclick="exportSummary()">üì• Export Summary</button>
        </div>
    </div>
    
    <script>
        // Configuration and Constants
        const CONFIG = {
            categories: ['work', 'education', 'relationships', 'money', 'business', 'leisure', 'vanity', 'health', 'home', 'produce', 'recover', 'discover'],
            empireCategories: ['empire-priorities', 'empire-deadlines', 'empire-revenue', 'empire-opportunities'],
            priorityLabels: {
                'empire': 'üèõ‚ö°',
                'high': 'üöÄüí•',
                'maintenance': 'üîßüõ†',
                'none': ''
            },
            categoryNames: {
                work: 'üíº Work',
                education: 'üìö Education',
                relationships: 'üíù Relationships',
                money: 'üí∞ Money',
                business: 'üöÄ Business',
                leisure: 'üé® Leisure',
                vanity: 'üíÖ Vanity',
                health: 'üåø Health',
                home: 'üè° Home',
                produce: 'üé¨ Produce',
                recover: '‚ôªÔ∏è Recover',
                discover: 'üîç Discover'
            },
            autosaveInterval: 300000, // 5 minutes
            syncCheckInterval: 300000 // 5 minutes
        };
        
        // State Management
        const state = {
            taskCounter: 0,
            currentSuggestion: null,
            lastLocalSaveTime: 0,
            isViewingHistory: false,
            unsavedChanges: false
        };
        
        // Default Goals
        const defaultGoals = [
            {
                id: 'new-yorker',
                title: 'Get Published in The New Yorker',
                milestones: [
                    { text: 'Study 10 recent New Yorker pieces in my genre', completed: false },
                    { text: 'Draft 3 potential submission pieces', completed: false },
                    { text: 'Get feedback from trusted critics', completed: false },
                    { text: 'Submit polished piece to New Yorker', completed: false },
                    { text: 'Follow up on submission', completed: false }
                ]
            },
            {
                id: 'cultural-authority',
                title: 'Build Cultural Criticism Authority',
                milestones: [
                    { text: 'Launch newsletter with consistent schedule', completed: false },
                    { text: 'Publish 20 high-quality criticism pieces', completed: false },
                    { text: 'Build audience of 1000+ engaged subscribers', completed: false },
                    { text: 'Get quoted as expert in major publication', completed: false },
                    { text: 'Book speaking opportunities at conferences', completed: false }
                ]
            },
            {
                id: 'creative-empire',
                title: 'Build Creative Empire Business',
                milestones: [
                    { text: 'Launch signature content series', completed: false },
                    { text: 'Create premium subscription tiers', completed: false },
                    { text: 'Secure 3 brand partnerships', completed: false },
                    { text: 'Develop online course or workshop', completed: false },
                    { text: 'Hit $10K/month revenue goal', completed: false }
                ]
            },
            {
                id: 'book-deal',
                title: 'Secure Book Deal',
                milestones: [
                    { text: 'Complete book proposal', completed: false },
                    { text: 'Write 3 sample chapters', completed: false },
                    { text: 'Research and list target agents', completed: false },
                    { text: 'Submit to 10 literary agents', completed: false },
                    { text: 'Sign with agent and publisher', completed: false }
                ]
            }
        ];
        
        // Suggestions Database
        const suggestions = {
            career: [
                "Draft a pitch for a major publication like The New Yorker",
                "Record a 5-minute video sharing your sharp take on a current event",
                "Write 3 original, thought-provoking social media posts",
                "Outline a concept for your own show or media brand",
                "Create a visually stunning graphic to accompany your next piece",
                "Research and draft commentary on a trending political topic",
                "Start writing a script for a 'Read & React' style video",
                "Design a media kit that showcases your intellectual authority",
                "Brainstorm 10 original angles on popular topics in your field",
                "Write a compelling bio that positions you as a thought leader",
                "Draft a submission for The New Yorker's 'Shouts & Murmurs' section",
                "Write a cultural criticism piece analyzing a current fashion or beauty trend",
                "Research and reach out to 3 editors at publications similar to The New Yorker",
                "Draft a book proposal for your racialized aesthetics book",
                "Create a media kit showcasing your cultural criticism expertise",
                "Write a detailed analysis of a recent fashion documentary",
                "Pitch yourself as a cultural commentator to 3 podcasts",
                "Draft a letter to a celebrity you'd want to interview",
                "Create a Twitter thread analyzing current media representation",
                "Share your hot take on a trending cultural moment"
            ],
            wealth: [
                "Research 3 potential brand partnership opportunities",
                "Draft a proposal for a premium subscription tier",
                "Calculate your target monthly income and reverse-engineer the steps",
                "Create a pricing strategy for a new digital product",
                "Reach out to one potential speaking engagement contact",
                "Analyze your most profitable content and plan to create more",
                "Set up a system to track all income streams",
                "Research successful creators in your space and their business models",
                "Draft an email pitch for a lucrative collaboration",
                "Create a one-page business plan for your creative empire",
                "Create a pitch deck for your 'Taste of Kimberly' newsletter",
                "Calculate pricing strategy for Taste of Kimberly subscriptions",
                "Research 3 brands that could sponsor your newsletter",
                "Draft a media kit for potential brand partnerships",
                "Plan content calendar for your next month of posts",
                "Create a survey to understand your audience's interests"
            ],
            growth: [
                "Read one article from a prestigious publication and take notes",
                "Listen to 20 minutes of an intellectually stimulating podcast",
                "Research a trending topic and collect 5 interesting statistics",
                "Turn your recent reading highlights into potential content ideas",
                "Watch a cultural commentary video and write your own response",
                "Read the first chapter of a book that challenges your thinking",
                "Subscribe to a new newsletter from a thought leader you admire",
                "Research an academic paper related to your interests",
                "Create a system to capture and organize your best ideas",
                "Follow 3 new accounts that share high-quality intellectual content",
                "Watch one fashion documentary from your list and take detailed notes",
                "Research the submission guidelines for 5 literary magazines",
                "Study the structure of 3 recent New Yorker cultural criticism pieces",
                "Read one essay by Andrea Long Chu and analyze her approach",
                "Research Leandra M. Cohen's early career trajectory for insights",
                "Take notes on the latest issue of a high-end fashion magazine"
            ],
            home: [
                "Rearrange one corner of your space to be more inspiring",
                "Research and save 5 beautiful home decor ideas on Pinterest",
                "Declutter your desk area for better creative focus",
                "Add one beautiful object to your most-used workspace",
                "Research neighborhoods or homes you'd love to live in",
                "Create a mood board for your ideal living space",
                "Organize your books in a way that sparks joy",
                "Light a candle and appreciate your current environment",
                "Take a photo of the most beautiful corner of your home",
                "Research one home improvement that would boost your creativity"
            ],
            wellness: [
                "Take a 10-minute walk while listening to something inspiring",
                "Do 5 minutes of stretching or gentle movement",
                "Prepare one nourishing meal that makes you feel good",
                "Practice 5 minutes of deep breathing or meditation",
                "Take a luxurious shower or bath as a reset ritual",
                "Write down 3 things you're grateful for today",
                "Schedule time for rest without guilt",
                "Dance to one song that makes you feel powerful",
                "Step outside and get some natural light",
                "Plan one joyful activity for this week"
            ],
            vanity: [
                "Try a new makeup look that makes you feel powerful",
                "Organize your closet and plan 3 outfits that tell your story",
                "Take a few photos of yourself looking confident",
                "Research a beauty trend you want to try",
                "Put together an outfit that makes you feel like your best self",
                "Do a skincare routine that feels luxurious",
                "Practice your signature pose or expression in the mirror",
                "Choose accessories that elevate your daily look",
                "Plan your outfit for tomorrow with intention",
                "Write a sample 'Shallow Side' newsletter issue to test your format",
                "Write a LinkedIn post about your unique perspective on aesthetics",
                "Create a mood board that demonstrates your aesthetic eye"
            ],
            relationships: [
                "Send a thoughtful message to someone who supports your work",
                "Comment meaningfully on 3 posts from people in your community",
                "Reach out to a creator you admire for a potential collaboration",
                "Write a post that invites your audience to share their thoughts",
                "Schedule a coffee date with someone who inspires you",
                "Thank someone who has helped your career or creativity",
                "Join a conversation in your field on social media",
                "Plan a way to give value to your community this week",
                "Reach out to an old friend who might enjoy your current work",
                "Engage with your Patreon community or create content for them",
                "Research and connect with 3 Black women cultural critics on social media",
                "Plan the format and guest list for your first Salon Noire event",
                "Reach out to one potential collaborator for 'Black Women in The Wild'",
                "Draft invitation copy for a supper club event",
                "Connect with 2 people who could be interview subjects",
                "Comment thoughtfully on 5 posts by established cultural critics"
            ]
        };
        
        // Utility Functions
        const utils = {
            getDateString(date = new Date()) {
                return date.toDateString();
            },
            
            getYesterdayString() {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                return yesterday.toDateString();
            },
            
            formatTime(minutes) {
                if (minutes === 0) return '';
                if (minutes < 60) return `${minutes}m`;
                const hours = Math.floor(minutes / 60);
                const mins = minutes % 60;
                return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;
            },
            
            showToast(message, duration = 3000) {
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, duration);
            },
            
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        };
        
        // UI Functions
        const ui = {
            updateSyncStatus(message) {
                const statusEl = document.getElementById('syncStatus');
                if (statusEl) {
                    statusEl.textContent = message;
                }
            },
            
            updateCompletedCount() {
                const todayData = data.getCurrentDayData();
                let completed = 0;
                
                Object.keys(todayData).forEach(category => {
                    if (category !== 'brainDump' && category !== 'goals' && category !== 'streaks' && Array.isArray(todayData[category])) {
                        completed += todayData[category].filter(task => task.completed).length;
                    }
                });
                
                document.getElementById('completedCount').textContent = completed;
            },
            
            updateTotalTime() {
                let totalMinutes = 0;
                document.querySelectorAll('.task-input').forEach(taskDiv => {
                    const time = parseInt(taskDiv.dataset.timeSpent) || 0;
                    totalMinutes += time;
                });
                
                const timeElement = document.getElementById('totalTime');
                if (timeElement) {
                    timeElement.innerHTML = `<strong>Time Today:</strong> ${utils.formatTime(totalMinutes)}`;
                }
            },
            
            initializeStickyNav() {
                const navPills = document.querySelectorAll('.nav-pill');
                const sections = document.querySelectorAll('.section');
                
                navPills.forEach(pill => {
                    pill.addEventListener('click', () => {
                        const targetId = pill.getAttribute('data-section');
                        const targetSection = document.getElementById(targetId);
                        
                        if (targetSection) {
                            navPills.forEach(p => p.classList.remove('active'));
                            pill.classList.add('active');
                            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    });
                });
                
                // Update active nav on scroll
                window.addEventListener('scroll', utils.debounce(() => {
                    let current = '';
                    
                    sections.forEach(section => {
                        const sectionTop = section.offsetTop;
                        if (window.scrollY >= (sectionTop - 100)) {
                            current = section.getAttribute('id');
                        }
                    });
                    
                    navPills.forEach(pill => {
                        pill.classList.remove('active');
                        if (pill.getAttribute('data-section') === current) {
                            pill.classList.add('active');
                        }
                    });
                }, 100));
            }
        };
        
        // Data Management
        const data = {
            async saveData() {
                try {
                    state.lastLocalSaveTime = Date.now();
                    ui.updateSyncStatus('üîÑ Syncing...');
                    const dataToSave = this.getCurrentDayData();
                    const todayKey = utils.getDateString();
                    
                    // Save to localStorage first (backup)
                    localStorage.setItem(todayKey, JSON.stringify(dataToSave));
                    
                    // Save to Firebase
                    await db.collection('productivity').doc(todayKey)
                        .set({
                            ...dataToSave,
                            lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    
                    ui.updateSyncStatus('‚òÅ Cloud Synced');
                    state.unsavedChanges = false;
                    
                    setTimeout(() => {
                        ui.updateSyncStatus('Ready to Track');
                    }, 2000);
                    
                } catch (error) {
                    console.error('Save error:', error);
                    ui.updateSyncStatus('‚ö† Local Only');
                    utils.showToast('Data saved locally. Cloud sync failed.');
                }
            },
            
            async loadData(date = utils.getDateString()) {
                try {
                    ui.updateSyncStatus('üì• Loading...');
                    
                    // Try Firebase first
                    const doc = await db.collection('productivity').doc(date).get();
                    
                    if (doc.exists) {
                        const firebaseData = doc.data();
                        delete firebaseData.lastUpdated;
                        this.loadDataIntoUI(firebaseData);
                        ui.updateSyncStatus('‚òÅ Cloud Loaded');
                        
                        // Update localStorage with cloud data
                        localStorage.setItem(date, JSON.stringify(firebaseData));
                    } else {
                        // No cloud data, try localStorage
                        const localData = localStorage.getItem(date);
                        if (localData) {
                            const parsedData = JSON.parse(localData);
                            this.loadDataIntoUI(parsedData);
                            ui.updateSyncStatus('üì± Local Data');
                        } else {
                            tasks.initializeEmptyTasks();
                            ui.updateSyncStatus('Ready to Track');
                        }
                    }
                    
                } catch (error) {
                    console.error('Load error:', error);
                    // Fallback to localStorage
                    const localData = localStorage.getItem(date);
                    if (localData) {
                        const parsedData = JSON.parse(localData);
                        this.loadDataIntoUI(parsedData);
                        ui.updateSyncStatus('üì± Local Data');
                    } else {
                        tasks.initializeEmptyTasks();
                        ui.updateSyncStatus('Ready to Track');
                    }
                }
            },
            
            getCurrentDayData() {
                const dayData = {};
                
                // Get regular category tasks
                CONFIG.categories.forEach(category => {
                    const container = document.getElementById(category + '-tasks');
                    const taskList = [];
                    
                    if (container) {
                        container.querySelectorAll('.task-input').forEach(taskDiv => {
                            const checkbox = taskDiv.querySelector('input[type="checkbox"]');
                            const textInput = taskDiv.querySelector('input[type="text"]');
                            const priority = taskDiv.dataset.priority || 'none';
                            
                            if (textInput && textInput.value.trim()) {
                                taskList.push({
                                    text: textInput.value,
                                    completed: checkbox.checked,
                                    priority: priority,
                                    timeSpent: parseInt(taskDiv.dataset.timeSpent) || 0
                                });
                            }
                        });
                    }
                    
                    dayData[category] = taskList;
                });
                
                // Get empire integration tasks
                CONFIG.empireCategories.forEach(category => {
                    const container = document.getElementById(category);
                    const taskList = [];
                    
                    if (container) {
                        container.querySelectorAll('.empire-task-input').forEach(taskDiv => {
                            const checkbox = taskDiv.querySelector('input[type="checkbox"]');
                            const textInput = taskDiv.querySelector('input[type="text"]');
                            
                            if (textInput && textInput.value.trim()) {
                                taskList.push({
                                    text: textInput.value,
                                    completed: checkbox.checked
                                });
                            }
                        });
                    }
                    
                    dayData[category] = taskList;
                });
                
                // Get brain dump
                const brainDump = document.getElementById('brainDumpTextarea');
                dayData.brainDump = brainDump ? brainDump.value : '';
                
                // Get goals
                dayData.goals = goals.getCurrentGoalData();
                
                // Get streaks
                dayData.streaks = {
                    writing: parseInt(document.getElementById('writingStreak').textContent) || 0,
                    submission: parseInt(document.getElementById('submissionStreak').textContent) || 0,
                    authority: parseInt(document.getElementById('authorityStreak').textContent) || 0,
                    newsletter: parseInt(document.getElementById('newsletterStreak').textContent) || 0
                };
                
                return dayData;
            },
            
            loadDataIntoUI(dayData) {
                // Load regular tasks
                CONFIG.categories.forEach(category => {
                    if (dayData[category] && Array.isArray(dayData[category])) {
                        const container = document.getElementById(category + '-tasks');
                        if (container) {
                            container.innerHTML = '';
                            dayData[category].forEach(task => {
                                if (task.text && task.text.trim()) {
                                    const taskDiv = tasks.createTaskElement(category, task.text, task.completed, task.priority, task.timeSpent || 0);
                                    container.appendChild(taskDiv);
                                }
                            });
                            // Add an empty task
                            tasks.addTask(category);
                        }
                    }
                });
                
                // Load empire tasks
                CONFIG.empireCategories.forEach(category => {
                    if (dayData[category] && Array.isArray(dayData[category])) {
                        const container = document.getElementById(category);
                        if (container) {
                            container.innerHTML = '';
                            dayData[category].forEach(task => {
                                if (task.text && task.text.trim()) {
                                    const taskDiv = tasks.createEmpireTaskElement(category, task.text, task.completed);
                                    container.appendChild(taskDiv);
                                }
                            });
                            // Add an empty task
                            tasks.addEmpireTask(category);
                        }
                    }
                });
                
                // Load brain dump
                if (dayData.brainDump !== undefined) {
                    const textarea = document.getElementById('brainDumpTextarea');
                    if (textarea) {
                        textarea.value = dayData.brainDump || '';
                    }
                }
                
                // Load goals
                if (dayData.goals) {
                    goals.loadGoalData(dayData.goals);
                }
                
                // Load streaks
                if (dayData.streaks) {
                    document.getElementById('writingStreak').textContent = dayData.streaks.writing || 0;
                    document.getElementById('submissionStreak').textContent = dayData.streaks.submission || 0;
                    document.getElementById('authorityStreak').textContent = dayData.streaks.authority || 0;
                    document.getElementById('newsletterStreak').textContent = dayData.streaks.newsletter || 0;
                }
                
                ui.updateCompletedCount();
                ui.updateTotalTime();
                streaks.updateStreaks();
            }
        };
        
        // Task Management
        const tasks = {
            createTaskElement(category, text = '', completed = false, priority = 'none', timeSpent = 0) {
                const taskDiv = document.createElement('div');
                taskDiv.className = 'task-input';
                if (completed) {
                    taskDiv.classList.add('completed');
                }
                taskDiv.dataset.priority = priority;
                taskDiv.dataset.timeSpent = timeSpent;
                
                taskDiv.innerHTML = `
                    <input type="checkbox" class="task-checkbox" id="task-${state.taskCounter}" ${completed ? 'checked' : ''} 
                        onchange="tasks.handleCheckboxChange(this); ui.updateCompletedCount(); streaks.updateStreaks(); data.saveData();">
                    <div class="priority-buttons">
                        <button class="priority-btn ${priority === 'empire' ? 'active' : ''}" 
                            onclick="tasks.setPriority(this, 'empire')" title="Empire Critical">üèõ‚ö°</button>
                        <button class="priority-btn ${priority === 'high' ? 'active' : ''}" 
                            onclick="tasks.setPriority(this, 'high')" title="High Impact">üöÄüí•</button>
                        <button class="priority-btn ${priority === 'maintenance' ? 'active' : ''}" 
                            onclick="tasks.setPriority(this, 'maintenance')" title="Maintenance">üîßüõ†</button>
                    </div>
                    <input type="text" class="task-text" placeholder="Enter your task here..." 
                        value="${text}"
                        onkeypress="tasks.handleEnter(event, '${category}')"
                        onchange="data.saveData()">
                    <div class="time-tracking">
                        <button class="time-btn" onclick="tasks.addTime(this, 15)">+15m</button>
                        <button class="time-btn" onclick="tasks.addTime(this, 30)">+30m</button>
                        <button class="time-btn" onclick="tasks.addTime(this, 60)">+1h</button>
                        <span class="time-display">${utils.formatTime(timeSpent)}</span>
                    </div>
                    <button class="delete-task-btn" onclick="tasks.deleteTask(this, '${category}')">√ó</button>
                `;
                
                state.taskCounter++;
                return taskDiv;
            },
            
            createEmpireTaskElement(category, text = '', completed = false) {
                const taskDiv = document.createElement('div');
                taskDiv.className = 'empire-task-input';
                
                taskDiv.innerHTML = `
                    <input type="checkbox" class="task-checkbox" id="empire-task-${state.taskCounter}" ${completed ? 'checked' : ''} 
                        onchange="ui.updateCompletedCount(); data.saveData();">
                    <input type="text" class="task-text" placeholder="Enter your task here..." 
                        value="${text}"
                        onkeypress="tasks.handleEmpireEnter(event, '${category}')"
                        onchange="data.saveData()">
                    <button class="delete-task-btn" onclick="tasks.deleteTask(this, '${category}')">√ó</button>
                `;
                
                state.taskCounter++;
                return taskDiv;
            },
            
            addTask(category) {
                const container = document.getElementById(category + '-tasks');
                const taskDiv = this.createTaskElement(category);
                container.appendChild(taskDiv);
                
                const textInput = taskDiv.querySelector('.task-text');
                textInput.focus();
            },
            
            addEmpireTask(category) {
                const container = document.getElementById(category);
                const taskDiv = this.createEmpireTaskElement(category);
                container.appendChild(taskDiv);
                
                const textInput = taskDiv.querySelector('.task-text');
                textInput.focus();
            },
            
            handleCheckboxChange(checkbox) {
                const taskDiv = checkbox.closest('.task-input');
                if (checkbox.checked) {
                    taskDiv.classList.add('completed');
                } else {
                    taskDiv.classList.remove('completed');
                }
            },
            
            handleEnter(event, category) {
                if (event.key === 'Enter') {
                    this.addTask(category);
                }
            },
            
            handleEmpireEnter(event, category) {
                if (event.key === 'Enter') {
                    this.addEmpireTask(category);
                }
            },
            
            deleteTask(button, category) {
                const taskDiv = button.closest('.task-input') || button.closest('.empire-task-input');
                const container = taskDiv.parentElement;
                
                if (container.children.length > 1) {
                    taskDiv.remove();
                    data.saveData();
                    ui.updateCompletedCount();
                    ui.updateTotalTime();
                } else {
                    // If it's the last task, just clear it
                    const textInput = taskDiv.querySelector('.task-text');
                    const checkbox = taskDiv.querySelector('.task-checkbox');
                    textInput.value = '';
                    checkbox.checked = false;
                    taskDiv.dataset.priority = 'none';
                    taskDiv.dataset.timeSpent = '0';
                    
                    // Update priority buttons
                    const priorityButtons = taskDiv.querySelectorAll('.priority-btn');
                    priorityButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Update time display if it exists
                    const timeDisplay = taskDiv.querySelector('.time-display');
                    if (timeDisplay) {
                        timeDisplay.textContent = '';
                    }
                    
                    data.saveData();
                    ui.updateCompletedCount();
                    ui.updateTotalTime();
                }
            },
            
            setPriority(button, priority) {
                const taskDiv = button.closest('.task-input');
                const priorityButtons = taskDiv.querySelectorAll('.priority-btn');
                
                // Toggle off if clicking the same priority
                if (button.classList.contains('active')) {
                    button.classList.remove('active');
                    taskDiv.dataset.priority = 'none';
                } else {
                    // Remove active from all buttons
                    priorityButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active to clicked button
                    button.classList.add('active');
                    taskDiv.dataset.priority = priority;
                }
                
                data.saveData();
            },
            
            addTime(button, minutes) {
                const taskDiv = button.closest('.task-input');
                const currentTime = parseInt(taskDiv.dataset.timeSpent) || 0;
                const newTime = currentTime + minutes;
                taskDiv.dataset.timeSpent = newTime;
                
                // Update display
                const timeDisplay = taskDiv.querySelector('.time-display');
                timeDisplay.textContent = utils.formatTime(newTime);
                
                // Update total time
                ui.updateTotalTime();
                data.saveData();
            },
            
            initializeEmptyTasks() {
                CONFIG.categories.forEach(category => {
                    const container = document.getElementById(category + '-tasks');
                    if (container && container.children.length === 0) {
                        this.addTask(category);
                    }
                });
                
                CONFIG.empireCategories.forEach(category => {
                    const container = document.getElementById(category);
                    if (container && container.children.length === 0) {
                        this.addEmpireTask(category);
                    }
                });
                
                // Initialize goals
                goals.initializeGoals();
            }
        };
        
        // Goals Management
        const goals = {
            initializeGoals() {
                const container = document.getElementById('goals-container');
                container.innerHTML = '';
                
                defaultGoals.forEach(goal => {
                    const goalCard = this.createGoalCard(goal);
                    container.appendChild(goalCard);
                });
            },
            
            createGoalCard(goal) {
                const completed = goal.milestones.filter(m => m.completed).length;
                const total = goal.milestones.length;
                const percentage = (completed / total) * 100;
                
                const card = document.createElement('div');
                card.className = 'goal-card';
                card.id = `goal-${goal.id}`;
                
                card.innerHTML = `
                    <div class="goal-header">
                        <div class="goal-title">${goal.title}</div>
                        <div class="goal-progress">
                            <span class="progress-text">${completed}/${total}</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%"></div>
                    </div>
                    <ul class="milestone-list">
                        ${goal.milestones.map((milestone, index) => `
                            <li class="milestone-item ${milestone.completed ? 'completed' : ''}">
                                <input type="checkbox" class="milestone-checkbox" 
                                    ${milestone.completed ? 'checked' : ''}
                                    onchange="goals.updateGoalProgress('${goal.id}', ${index}); data.saveData();">
                                <span class="milestone-text">${milestone.text}</span>
                            </li>
                        `).join('')}
                    </ul>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="goals.addMilestone('${goal.id}')">+ Add Milestone</button>
                `;
                
                return card;
            },
            
            updateGoalProgress(goalId, milestoneIndex) {
                const goal = defaultGoals.find(g => g.id === goalId);
                if (goal && goal.milestones[milestoneIndex]) {
                    goal.milestones[milestoneIndex].completed = !goal.milestones[milestoneIndex].completed;
                    
                    // Recreate the goal card
                    const container = document.getElementById('goals-container');
                    const oldCard = document.getElementById(`goal-${goalId}`);
                    const newCard = this.createGoalCard(goal);
                    container.replaceChild(newCard, oldCard);
                }
            },
            
            addMilestone(goalId) {
                const goal = defaultGoals.find(g => g.id === goalId);
                if (goal) {
                    const text = prompt('Enter new milestone:');
                    if (text && text.trim()) {
                        goal.milestones.push({ text: text.trim(), completed: false });
                        
                        // Recreate the goal card
                        const container = document.getElementById('goals-container');
                        const oldCard = document.getElementById(`goal-${goalId}`);
                        const newCard = this.createGoalCard(goal);
                        container.replaceChild(newCard, oldCard);
                        
                        data.saveData();
                    }
                }
            },
            
            getCurrentGoalData() {
                return defaultGoals;
            },
            
            loadGoalData(goalsData) {
                if (goalsData && Array.isArray(goalsData)) {
                    // Update defaultGoals with loaded data
                    goalsData.forEach(loadedGoal => {
                        const defaultGoal = defaultGoals.find(g => g.id === loadedGoal.id);
                        if (defaultGoal) {
                            defaultGoal.milestones = loadedGoal.milestones;
                        }
                    });
                    
                    // Reinitialize goals display
                    this.initializeGoals();
                }
            }
        };
        
        // Streaks Management
        const streaks = {
            updateStreaks() {
                const todayData = data.getCurrentDayData();
                
                // Update streaks based on completed Empire Critical tasks
                let hasWriting = false;
                let hasSubmission = false;
                let hasAuthority = false;
                let hasNewsletter = false;
                
                Object.keys(todayData).forEach(category => {
                    if (Array.isArray(todayData[category])) {
                        todayData[category].forEach(task => {
                            if (task.completed && task.priority === 'empire') {
                                const taskText = task.text.toLowerCase();
                                
                                if (taskText.includes('write') || taskText.includes('draft') || taskText.includes('blog')) {
                                    hasWriting = true;
                                }
                                if (taskText.includes('submit') || taskText.includes('pitch') || taskText.includes('send')) {
                                    hasSubmission = true;
                                }
                                if (taskText.includes('post') || taskText.includes('tweet') || taskText.includes('comment')) {
                                    hasAuthority = true;
                                }
                                if (taskText.includes('newsletter') || taskText.includes('email') || taskText.includes('subscriber')) {
                                    hasNewsletter = true;
                                }
                            }
                        });
                    }
                });
                
                // Update streak displays (simplified for demo)
                if (hasWriting) {
                    const current = parseInt(document.getElementById('writingStreak').textContent) || 0;
                    if (current === 0) document.getElementById('writingStreak').textContent = 1;
                }
                if (hasSubmission) {
                    const current = parseInt(document.getElementById('submissionStreak').textContent) || 0;
                    if (current === 0) document.getElementById('submissionStreak').textContent = 1;
                }
                if (hasAuthority) {
                    const current = parseInt(document.getElementById('authorityStreak').textContent) || 0;
                    if (current === 0) document.getElementById('authorityStreak').textContent = 1;
                }
                if (hasNewsletter) {
                    const current = parseInt(document.getElementById('newsletterStreak').textContent) || 0;
                    if (current === 0) document.getElementById('newsletterStreak').textContent = 1;
                }
            },
            
            calculateStreak() {
                // Simple streak calculation - in a real app, this would check consecutive days
                return Math.floor(Math.random() * 7) + 1;
            }
        };
        
        // Reviews and History
        const reviews = {
            async loadYesterdayReview() {
                try {
                    const yesterdayKey = utils.getYesterdayString();
                    
                    // Try Firebase first
                    const doc = await db.collection('productivity').doc(yesterdayKey).get();
                    
                    if (doc.exists) {
                        const yesterdayData = doc.data();
                        delete yesterdayData.lastUpdated;
                        this.displayYesterdayReview(yesterdayData);
                    } else {
                        // Try localStorage
                        const localData = localStorage.getItem(yesterdayKey);
                        if (localData) {
                            const parsedData = JSON.parse(localData);
                            this.displayYesterdayReview(parsedData);
                        } else {
                            this.hideYesterdayReview();
                        }
                    }
                    
                } catch (error) {
                    console.error('Yesterday review error:', error);
                    this.hideYesterdayReview();
                }
            },
            
            displayYesterdayReview(yesterdayData) {
                let completedTasks = [];
                let totalCompleted = 0;
                
                Object.keys(yesterdayData).forEach(category => {
                    if (category === 'brainDump' || category === 'lastUpdated' || category === 'goals' || category === 'streaks') return;
                    
                    if (Array.isArray(yesterdayData[category])) {
                        yesterdayData[category].forEach(task => {
                            if (task.completed && task.text && typeof task.text === 'string' && task.text.trim()) {
                                completedTasks.push({
                                    text: task.text,
                                    category: CONFIG.categoryNames[category] || category,
                                    priority: task.priority || 'none'
                                });
                                totalCompleted++;
                            }
                        });
                    }
                });
                
                // Only show the section if there are actually completed tasks
                if (totalCompleted > 0) {
                    document.getElementById('yesterdayCount').textContent = totalCompleted;
                    document.getElementById('streakCount').textContent = streaks.calculateStreak();
                    
                    const tasksContainer = document.getElementById('yesterdayTasks');
                    tasksContainer.innerHTML = completedTasks.map(task => `
                        <div class="yesterday-task-item">
                            <span class="task-category-badge">${task.category}</span>
                            ${task.priority !== 'none' ? `<span>${CONFIG.priorityLabels[task.priority]}</span>` : ''}
                            <span>${task.text}</span>
                        </div>
                    `).join('');
                    
                    document.getElementById('yesterdaySection').style.display = 'block';
                } else {
                    this.hideYesterdayReview();
                }
            },
            
            hideYesterdayReview() {
                document.getElementById('yesterdaySection').style.display = 'none';
            },
            
            showWeeklyReview() {
                const weekData = this.getWeekData();
                
                // Calculate stats
                let totalTasks = 0;
                let totalTime = 0;
                let categoryTotals = {};
                let dailyTotals = {};
                
                weekData.forEach(dayData => {
                    let dayTotal = 0;
                    
                    Object.keys(dayData.data).forEach(category => {
                        if (category === 'brainDump' || category === 'goals' || category === 'streaks') return;
                        
                        if (Array.isArray(dayData.data[category])) {
                            const completed = dayData.data[category].filter(task => task.completed);
                            totalTasks += completed.length;
                            dayTotal += completed.length;
                            
                            if (!categoryTotals[category]) categoryTotals[category] = 0;
                            categoryTotals[category] += completed.length;
                            
                            // Calculate time
                            dayData.data[category].forEach(task => {
                                if (task.completed && task.timeSpent) {
                                    totalTime += task.timeSpent;
                                }
                            });
                        }
                    });
                    
                    dailyTotals[dayData.date] = dayTotal;
                });
                
                // Find most productive day
                let mostProductiveDay = { date: '', count: 0 };
                Object.entries(dailyTotals).forEach(([date, count]) => {
                    if (count > mostProductiveDay.count) {
                        mostProductiveDay = { date, count };
                    }
                });
                
                // Find top category
                let topCategory = { name: '', count: 0 };
                Object.entries(categoryTotals).forEach(([category, count]) => {
                    if (count > topCategory.count) {
                        topCategory = { name: category, count };
                    }
                });
                
                // Update display
                document.getElementById('weeklyTaskCount').textContent = totalTasks;
                document.getElementById('weeklyTimeSpent').textContent = utils.formatTime(totalTime);
                document.getElementById('mostProductiveDay').textContent = mostProductiveDay.date ? 
                    new Date(mostProductiveDay.date).toLocaleDateString('en-US', { weekday: 'short' }) : '-';
                document.getElementById('topCategory').textContent = CONFIG.categoryNames[topCategory.name] || '-';
                
                // Create category breakdown
                const breakdown = document.getElementById('weeklyBreakdown');
                breakdown.innerHTML = Object.entries(categoryTotals)
                    .sort((a, b) => b[1] - a[1])
                    .map(([category, count]) => {
                        const percentage = totalTasks > 0 ? (count / totalTasks * 100) : 0;
                        return `
                            <div class="category-bar">
                                <div class="category-bar-label">
                                    <span>${CONFIG.categoryNames[category]}</span>
                                    <span>${count} tasks</span>
                                </div>
                                <div class="category-bar-fill">
                                    <div class="category-bar-progress" style="width: ${percentage}%">
                                        ${percentage.toFixed(0)}%
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                
                // Generate insights
                const insights = document.getElementById('weeklyInsights');
                insights.innerHTML = `
                    <h3>üìà Weekly Insights</h3>
                    ${this.generateWeeklyInsights(totalTasks, totalTime, mostProductiveDay, topCategory, categoryTotals)}
                `;
                
                document.getElementById('weeklySection').style.display = 'block';
            },
            
            hideWeeklyReview() {
                document.getElementById('weeklySection').style.display = 'none';
            },
            
            getWeekData() {
                const weekData = [];
                const today = new Date();
                
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateKey = date.toDateString();
                    
                    const dayData = localStorage.getItem(dateKey);
                    if (dayData) {
                        weekData.push({
                            date: dateKey,
                            data: JSON.parse(dayData)
                        });
                    }
                }
                
                return weekData;
            },
            
            generateWeeklyInsights(totalTasks, totalTime, mostProductiveDay, topCategory, categoryTotals) {
                const insights = [];
                
                if (totalTasks > 0) {
                    insights.push(`<div class="insight-item">You completed ${totalTasks} tasks this week! That's an average of ${Math.round(totalTasks / 7)} per day.</div>`);
                }
                
                if (totalTime > 0) {
                    insights.push(`<div class="insight-item">You invested ${utils.formatTime(totalTime)} in your goals this week.</div>`);
                }
                
                if (topCategory.name) {
                    insights.push(`<div class="insight-item">Your main focus was ${CONFIG.categoryNames[topCategory.name]} with ${topCategory.count} completed tasks.</div>`);
                }
                
                if (mostProductiveDay.date) {
                    insights.push(`<div class="insight-item">Your most productive day was ${new Date(mostProductiveDay.date).toLocaleDateString('en-US', { weekday: 'long' })} with ${mostProductiveDay.count} tasks completed!</div>`);
                }
                
                // Add encouragement based on performance
                if (totalTasks > 50) {
                    insights.push(`<div class="insight-item">üî• EMPIRE MODE! You're operating at peak performance!</div>`);
                } else if (totalTasks > 30) {
                    insights.push(`<div class="insight-item">üí™ Excellent week! You're building serious momentum!</div>`);
                } else if (totalTasks > 15) {
                    insights.push(`<div class="insight-item">‚ú® Good progress! Keep building on this foundation!</div>`);
                } else {
                    insights.push(`<div class="insight-item">üå± Every step counts! Next week is full of possibilities!</div>`);
                }
                
                return insights.join('');
            }
        };
        
        // Suggestions System
        const suggestionSystem = {
            getRandomSuggestion() {
                const allSuggestions = Object.values(suggestions).flat();
                const allCategories = Object.keys(suggestions);
                
                const randomSuggestion = allSuggestions[Math.floor(Math.random() * allSuggestions.length)];
                const category = allCategories.find(cat => suggestions[cat].includes(randomSuggestion));
                
                this.displaySuggestion(randomSuggestion, category);
            },
            
            getSuggestionByCategory() {
                const selectedCategory = document.getElementById('categoryFilter').value;
                if (!selectedCategory) return;
                
                const categorySuggestions = suggestions[selectedCategory];
                const randomSuggestion = categorySuggestions[Math.floor(Math.random() * categorySuggestions.length)];
                
                this.displaySuggestion(randomSuggestion, selectedCategory);
            },
            
            displaySuggestion(text, category) {
                const categoryNames = {
                    career: 'üìù Career & Creativity',
                    wealth: 'üíº Wealth & Business',
                    growth: 'üìö Growth & Learning',
                    home: 'üè° Home & Environment',
                    wellness: 'üå± Wellness & Health',
                    vanity: '‚ú® Vanity & Visibility',
                    relationships: 'üíï Relationships & Community'
                };
                
                state.currentSuggestion = { text, category };
                
                document.getElementById('currentSuggestion').innerHTML = `
                    <div class="suggestion-text">${text}</div>
                    <div class="suggestion-category">${categoryNames[category]}</div>
                `;
            },
            
            getAnotherSuggestion() {
                const filter = document.getElementById('categoryFilter').value;
                if (filter) {
                    this.getSuggestionByCategory();
                } else {
                    this.getRandomSuggestion();
                }
            },
            
            addSuggestionAsTask() {
                if (!state.currentSuggestion) return;
                
                const categoryMap = {
                    career: 'work',
                    wealth: 'business',
                    growth: 'education',
                    home: 'home',
                    wellness: 'health',
                    vanity: 'vanity',
                    relationships: 'relationships'
                };
                
                const targetCategory = categoryMap[state.currentSuggestion.category];
                if (!targetCategory) return;
                
                const container = document.getElementById(targetCategory + '-tasks');
                const taskDiv = tasks.createTaskElement(targetCategory, state.currentSuggestion.text, false, 'empire');
                
                // Find the last task input
                const existingTasks = container.querySelectorAll('.task-input');
                if (existingTasks.length > 0) {
                    const lastTask = existingTasks[existingTasks.length - 1];
                    const lastInput = lastTask.querySelector('.task-text');
                    
                    // If the last task is empty, replace it
                    if (!lastInput.value.trim()) {
                        container.replaceChild(taskDiv, lastTask);
                    } else {
                        container.appendChild(taskDiv);
                    }
                } else {
                    container.appendChild(taskDiv);
                }
                
                // Add an empty task for the next input
                tasks.addTask(targetCategory);
                
                data.saveData();
                
                // Visual feedback
                utils.showToast('Task added successfully! üéØ');
            }
        };
        
        // Daily Summary
        const summary = {
            generateDailySummary() {
                const dayData = data.getCurrentDayData();
                const today = new Date().toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                let completedTasks = [];
                let totalCompleted = 0;
                
                // Analyze tasks by category
                const categoryStats = {};
                
                Object.keys(dayData).forEach(category => {
                    if (category === 'brainDump' || category === 'goals' || category === 'streaks') return;
                    
                    if (Array.isArray(dayData[category])) {
                        const taskList = dayData[category].filter(task => task.text && task.text.trim());
                        const completed = taskList.filter(task => task.completed);
                        
                        if (taskList.length > 0) {
                            categoryStats[category] = {
                                name: CONFIG.categoryNames[category] || category,
                                total: taskList.length,
                                completed: completed.length,
                                tasks: taskList
                            };
                            
                            totalCompleted += completed.length;
                            
                            // Add completed tasks to list
                            completed.forEach(task => {
                                completedTasks.push({
                                    text: task.text,
                                    category: CONFIG.categoryNames[category] || category,
                                    priority: task.priority || 'none'
                                });
                            });
                        }
                    }
                });
                
                // Generate summary HTML
                let summaryHTML = `
                    <div class="summary-section">
                        <h3>üìÖ ${today}</h3>
                    </div>
                    
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="summary-stat-number">${totalCompleted}</div>
                            <div class="summary-stat-label">Tasks Completed</div>
                        </div>
                    </div>
                    
                    <div class="summary-section">
                        <h3>üí´ Today's Wins</h3>
                        <p>${this.getEncouragementMessage(totalCompleted)}</p>
                    </div>
                `;
                
                // Add completed tasks if any
                if (completedTasks.length > 0) {
                    summaryHTML += `
                        <div class="summary-section">
                            <h3>‚úÖ Accomplished Today</h3>
                            <ul class="summary-task-list">
                                ${completedTasks.map(task => `
                                    <li class="summary-task-item">
                                        <strong>${task.category}:</strong> ${task.text}
                                        ${task.priority !== 'none' ? ` (${CONFIG.priorityLabels[task.priority]})` : ''}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                // Add category breakdown
                if (Object.keys(categoryStats).length > 0) {
                    summaryHTML += `
                        <div class="summary-section">
                            <h3>üìä Progress by Category</h3>
                            <div class="summary-stats">
                                ${Object.values(categoryStats).map(stat => `
                                    <div class="summary-stat">
                                        <div class="summary-stat-number">${stat.completed}/${stat.total}</div>
                                        <div class="summary-stat-label">${stat.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
                
                // Add brain dump if there's content
                if (dayData.brainDump && dayData.brainDump.trim()) {
                    summaryHTML += `
                        <div class="summary-section">
                            <h3>üß† Brain Dump</h3>
                            <div class="summary-brain-dump">${dayData.brainDump}</div>
                        </div>
                    `;
                }
                
                // Update the summary content
                document.getElementById('summaryContent').innerHTML = summaryHTML;
            },
            
            getEncouragementMessage(count) {
                if (count === 0) return "Today is a fresh start! Every journey begins with a single step.";
                if (count <= 3) return "You've made progress! Small steps lead to big changes.";
                if (count <= 7) return "Great momentum today! You're building powerful habits.";
                if (count <= 15) return "Incredible productivity! You're crushing your goals!";
                return "EMPIRE MODE ACTIVATED! You're unstoppable! üî•";
            },
            
            exportSummary() {
                const summaryContent = document.getElementById('summaryContent').innerHTML;
                const date = new Date().toISOString().split('T')[0];
                
                // Create a text version
                const textContent = summaryContent
                    .replace(/<h3>/g, '\n\n')
                    .replace(/<\/h3>/g, '\n')
                    .replace(/<strong>/g, '')
                    .replace(/<\/strong>/g, '')
                    .replace(/<li[^>]*>/g, '‚Ä¢ ')
                    .replace(/<[^>]+>/g, '')
                    .replace(/\s+/g, ' ')
                    .trim();
                
                // Create and download file
                const blob = new Blob([textContent], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `productivity-summary-${date}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                utils.showToast('Summary exported successfully! üìÑ');
            }
        };
        
        // History Functions
        const history = {
            viewHistoryDate() {
                const selectedDate = document.getElementById('historyDate').value;
                if (!selectedDate) return;
                
                const date = new Date(selectedDate);
                const dateString = date.toDateString();
                
                // Show notice
                const notice = document.getElementById('historyNotice');
                notice.textContent = `Viewing: ${date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
                notice.style.display = 'block';
                
                // Set viewing history state
                state.isViewingHistory = true;
                
                // Load data for selected date
                data.loadData(dateString);
                
                // Disable editing for past dates
                document.querySelectorAll('input, textarea, button').forEach(el => {
                    if (!el.classList.contains('history-btn') && !el.classList.contains('date-picker') && 
                        !el.classList.contains('nav-pill') && el.type !== 'date') {
                        el.disabled = true;
                    }
                });
            },
            
            returnToToday() {
                // Hide notice
                document.getElementById('historyNotice').style.display = 'none';
                
                // Reset date picker
                document.getElementById('historyDate').value = '';
                
                // Reset viewing history state
                state.isViewingHistory = false;
                
                // Re-enable editing
                document.querySelectorAll('input, textarea, button').forEach(el => {
                    el.disabled = false;
                });
                
                // Load today's data
                data.loadData();
            }
        };
        
        // Global Functions (exposed to HTML)
        window.startFreshDay = function() {
            if (confirm('This will clear all tasks for today and start fresh. Are you sure?')) {
                // Clear today's data
                const todayKey = utils.getDateString();
                localStorage.removeItem(todayKey);
                
                // Clear Firebase data
                db.collection('productivity').doc(todayKey).delete()
                    .catch(error => console.error('Error deleting cloud data:', error));
                
                // Reset UI
                CONFIG.categories.forEach(category => {
                    const container = document.getElementById(category + '-tasks');
                    if (container) {
                        container.innerHTML = '';
                    }
                });
                
                CONFIG.empireCategories.forEach(category => {
                    const container = document.getElementById(category);
                    if (container) {
                        container.innerHTML = '';
                    }
                });
                
                // Clear brain dump
                const brainDump = document.getElementById('brainDumpTextarea');
                if (brainDump) {
                    brainDump.value = '';
                }
                
                // Reset streaks
                document.getElementById('writingStreak').textContent = '0';
                document.getElementById('submissionStreak').textContent = '0';
                document.getElementById('authorityStreak').textContent = '0';
                document.getElementById('newsletterStreak').textContent = '0';
                
                // Reinitialize
                tasks.initializeEmptyTasks();
                ui.updateCompletedCount();
                data.saveData();
                
                utils.showToast('Fresh start! Ready for a productive day! üåÖ');
            }
        };
        
        window.showWeeklyReview = reviews.showWeeklyReview.bind(reviews);
        window.hideWeeklyReview = reviews.hideWeeklyReview.bind(reviews);
        window.hideYesterdayReview = reviews.hideYesterdayReview.bind(reviews);
        window.viewHistoryDate = history.viewHistoryDate.bind(history);
        window.returnToToday = history.returnToToday.bind(history);
        
        window.addTask = tasks.addTask.bind(tasks);
        window.addEmpireTask = tasks.addEmpireTask.bind(tasks);
        window.tasks = tasks;
        
        window.goals = goals;
        window.data = data;
        window.ui = ui;
        window.streaks = streaks;
        
        window.getRandomSuggestion = suggestionSystem.getRandomSuggestion.bind(suggestionSystem);
        window.getSuggestionByCategory = suggestionSystem.getSuggestionByCategory.bind(suggestionSystem);
        window.getAnotherSuggestion = suggestionSystem.getAnotherSuggestion.bind(suggestionSystem);
        window.addSuggestionAsTask = suggestionSystem.addSuggestionAsTask.bind(suggestionSystem);
        
        window.generateDailySummary = summary.generateDailySummary.bind(summary);
        window.exportSummary = summary.exportSummary.bind(summary);
        
        // Initialize the app
        window.addEventListener('load', async function() {
            // Set current date
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Set max date for history picker to today
            document.getElementById('historyDate').max = new Date().toISOString().split('T')[0];
            
            // Load data
            await reviews.loadYesterdayReview();
            await data.loadData();
            ui.initializeStickyNav();
            
            // Set up brain dump auto-save with debounce
            const textarea = document.getElementById('brainDumpTextarea');
            if (textarea) {
                textarea.addEventListener('input', utils.debounce(() => {
                    data.saveData();
                }, 1000));
            }
            
            // Real-time sync listener
            const todayKey = utils.getDateString();
            db.collection('productivity').doc(todayKey)
                .onSnapshot((doc) => {
                    // Check if this update happened more than 5 minutes after our last save
                    const timeSinceLastSave = Date.now() - state.lastLocalSaveTime;
                    
                    if (doc.exists && doc.metadata.hasPendingWrites === false && timeSinceLastSave > CONFIG.syncCheckInterval) {
                        const firebaseData = doc.data();
                        delete firebaseData.lastUpdated;
                        data.loadDataIntoUI(firebaseData);
                        ui.updateSyncStatus('‚òÅ Synced from another device!');
                        setTimeout(() => {
                            ui.updateSyncStatus('‚òÅ Cloud Synced');
                        }, 3000);
                    }
                });
            
            // Auto-save every 5 minutes
            setInterval(() => {
                if (!state.isViewingHistory && state.unsavedChanges) {
                    data.saveData();
                }
            }, CONFIG.autosaveInterval);
            
            // Update total time on load
            ui.updateTotalTime();
            
            // Initialize with empty tasks if needed
            if (document.querySelectorAll('.task-input').length === 0) {
                tasks.initializeEmptyTasks();
            }
            
            // Track unsaved changes
            document.addEventListener('input', () => {
                state.unsavedChanges = true;
            });
            
            // Warn before leaving with unsaved changes
            window.addEventListener('beforeunload', (e) => {
                if (state.unsavedChanges && !state.isViewingHistory) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            });
        });
    </script>
</body>
</html>
